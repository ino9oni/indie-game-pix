# タスク仕様: ゲームパッド対応

## 目的
- Web Gamepad API を用いて、USB接続などで利用可能な標準コントローラをサポートし、主要画面をゲームパッドで操作できるようにする。

## 要件
1. **検出と状態管理**
   - Gamepad API を監視し、最初に接続された標準ゲームパッドを対象とする。
   - 接続／切断イベントに応じてデバイス状態を更新し、未接続時は従来のマウス・キーボード操作にフォールバックする。
   - 最終操作デバイスに応じて UI のフォーカス表示やカーソル表示を切り替える。

2. **タイトル／メニュー操作**
   - 左スティック又は D-Pad 左右でボタン項目（New Game / Continue など）を巡回。
   - `A / Cross` ボタンで決定、`B / Circle` ボタンでキャンセル（戻れる画面のみ）。
   - 選択中のボタンに視覚的なハイライトを追加。

3. **会話モード**
   - `A / Cross` で次のセリフへ進む。
   - `B / Circle` でスキップ、`Start` でスキップ確認ダイアログ（既存の skip ボタン呼び出し）。

4. **ピクロス操作**
   - 十字キー／左スティックで専用カーソルを上下左右に移動する。
   - `A / Cross` で Fill、`B / Circle` で Cross、`Y / Triangle` で Maybe、`X / Square` でセルをクリア。
   - `Start` で Pause／Resume、`Select` で Reset を発火。
   - カーソルは 1 マス分のハイライトとして表示し、既存スコア／スペルロジックは共通に動作する。

5. **共通**
   - 1フレーム分の入力遅延が少ないようポーリングタイマーを設置する。
   - UI テキストに変更が必要な場合は GAMEDESIGN と実装を合わせ、可読性の高い1行コメントを適宜付与する。

## テスト観点
- ゲームパッド接続時にタイトル画面の選択ができる。
- 会話モードで A ボタンが Enter 相当で機能し、B / Start も期待通り動作する。
- ピクロス盤面をゲームパッドで完結操作でき、Pause／Reset ボタンも動く。
- マウス／キーボード操作へ戻った際に UI 表示が自然に戻る。
